## 3.4 Тестирование (функциональное и интеграционное); результаты

Тестирование прототипа tg-shop-ai выполнено с целью подтверждения работоспособности ключевых пользовательских сценариев интернет-магазина и корректности интеграции компонентов «Telegram-бот → БД → веб-интерфейс». В рамках проверки использованы методы тестирования, выбранные из классификации по принципам работы и по уровню функционального тестирования: смоук-тестирование, тестирование критического пути, позитивное и негативное тестирование.

### 3.4.1 Смоук-тестирование (smoke test)
Смоук-тестирование выполнялось для подтверждения того, что приложение запускается и доступна базовая функциональность. Для веб-части проверялась корректность регистрации маршрутов Flask-приложения (команда `flask routes`) и доступность основных страниц. Для Telegram-части подтверждался запуск обработчиков команд и готовность к обработке сообщений.

Ожидаемый результат: приложение стартует без ошибок; маршруты веб-интерфейса зарегистрированы; главная страница доступна.  
Фактический результат: маршруты `/`, `/catalog`, `/admin/products`, `/orders` зарегистрированы и отображаются в выводе `flask routes` (см. рисунок 6).

### 3.4.2 Тестирование критического пути (critical path)
Критический путь соответствует основному бизнес-сценарию «оформление заказа»: пользователь регистрируется, просматривает каталог и оформляет покупку выбранного товара. Валидация сценария проводится сквозным образом через взаимодействие Telegram-бота с БД и отображение результата в веб-части (страница заказов).

Ожидаемый результат: создаётся заказ и позиция заказа в БД; команда просмотра заказов возвращает созданный заказ; веб-страница заказов отображает данные для указанного `tg_id`.  
Фактический результат: (заполнить по результатам выполнения тест-кейса TC-02).

### 3.4.3 Позитивное тестирование (positive testing)
Позитивное тестирование выполнялось на корректных входных данных и корректных действиях пользователя. Проверялись сценарии: просмотр каталога, добавление товара через административную страницу, получение рекомендаций через `/ai <текст>`, корректная обработка команды покупки с существующим SKU.

Ожидаемый результат: система возвращает корректные ответы и отображает актуальные данные из БД; при запросе рекомендаций формируется подсказка и создаётся запись в журнале AI-обращений.  
Фактический результат: (заполнить по результатам тест-кейсов TC-03…TC-06).

### 3.4.4 Негативное тестирование (negative testing)
Негативное тестирование выполнялось на некорректных входных данных (например, несуществующий SKU, отсутствующий параметр команды, неверный формат идентификатора в запросе к странице заказов). Цель — убедиться, что система корректно обрабатывает ошибки и не приводит к повреждению данных.

Ожидаемый результат: пользователю возвращается понятное сообщение об ошибке/подсказка по корректному формату; приложение не завершается аварийно; некорректные операции не создают неконсистентные записи в БД.  
Фактический результат: (заполнить по результатам тест-кейсов TC-07…TC-08).

Тест-кейсы и результаты тестирования приведены в таблице 5.

Таблица 5 — Тест-кейсы и результаты тестирования tg-shop-ai

| ID   | Метод          | Предусловия | Шаги | Ожидаемый результат | Фактический результат | Статус | Артефакт |
|------|----------------|-------------|------|---------------------|------------------------|--------|----------|
| TC-01 | Smoke | Окружение настроено | `python -m flask --app "app.web.app:create_app()" routes` | В выводе есть основные маршруты |  |  | Рис. 6 |
| TC-02 | Critical path | Есть тестовый товар SKU-001 | `/start` → `/catalog` → `/buy SKU-001` → `/myorders` | Создан заказ и отображается в списке |  |  | Рис. 7 |
| TC-03 | Positive | Web запущен | Открыть `/catalog` | Отображается список товаров из БД |  |  | Рис. 5 |
| TC-04 | Positive | Web запущен | `/admin/products` добавить товар | Товар добавлен и виден в списке |  |  | Скрин страницы |
| TC-05 | Positive | Bot запущен | `/ai посоветуй что купить` | Ответ с рекомендациями + подсказка `/buy` |  |  | Скрин чата |
| TC-06 | Positive | Есть заказы | `/orders?tg_id=<ваш id>` | Отображаются заказы пользователя |  |  | Скрин страницы |
| TC-07 | Negative | Bot запущен | `/buy WRONG-SKU` | Сообщение об ошибке/нет товара |  |  | Скрин чата |
| TC-08 | Negative | Web запущен | `/orders?tg_id=abc` | Корректная обработка (ошибка/пусто), без падения |  |  | Скрин страницы |
