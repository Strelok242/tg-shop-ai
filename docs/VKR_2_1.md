## 2.1 Архитектура и состав модулей системы tg-shop-ai

Проектируемая система tg-shop-ai реализована по клиент-серверному принципу и включает два пользовательских интерфейса: Telegram-бот (для клиентских сценариев) и веб-приложение (для просмотра данных и администрирования каталога). Оба интерфейса обращаются к единому слою доступа к данным и используют общую базу данных. Такой подход обеспечивает согласованность данных о товарах и заказах, упрощает сопровождение и даёт возможность развивать функционал без дублирования логики.

На уровне компонент выделяются следующие основные части системы:

Telegram-бот — обеспечивает сценарии пользователя: регистрация (/start), просмотр каталога (/catalog), оформление заказа (/buy), просмотр заказов (/myorders), обращение к AI-помощнику (/ai). Бот принимает сообщения пользователя, валидирует ввод, вызывает функции доступа к данным и формирует ответы.

Веб-приложение (Flask) — предоставляет страницы: каталог товаров (/catalog), заказы пользователя (/orders?tg_id=…), административную страницу управления товарами (/admin/products). Веб-часть использует шаблоны HTML и обращается к тому же слою данных, что и бот.

Модуль работы с данными (DB слой) — содержит модели (ORM), репозитории и служебные функции инициализации/заполнения базы. Этот слой инкапсулирует SQL-операции и обеспечивает единый интерфейс для получения каталога, создания заказов, выборки заказов и сохранения логов.

AI-модуль — формирует рекомендацию/подсказку на основе текста запроса пользователя (на этапе прототипа — правило-ориентированная логика) и сохраняет пары запрос-ответ в базе данных для последующего анализа.

База данных (SQLite на этапе прототипа) — централизованно хранит сущности пользователей, товаров, заказов, позиций заказов и журнал AI-запросов.

На рисунке 2 представлена компонентная схема системы, отражающая взаимодействие модулей и направление потоков данных. Выделение слоя доступа к данным позволяет использовать общую модель и репозитории как для Telegram-бота, так и для веб-интерфейса, что снижает связанность компонентов и повышает расширяемость решения.
